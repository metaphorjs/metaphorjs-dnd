(function(){function ca(a){return"object"==typeof a&&3===I(a)&&!a.nodeType&&a.constructor===Object}function Ea(a){return!0===a||!1===a}function n(a){return"function"==typeof a}function z(a){return"string"==typeof a||a===""+a}function J(a){return"object"===typeof a&&5===I(a)}function Fa(a){if(null===a||"object"!=typeof a)return!1;a=I(a);return 2<a||-1==a}function M(){}function Ra(a,b,d,e,g,h){g=g||"before";return function(){if("instead"==g)return b.apply(d||e,arguments);if("before"==g){var c=b.apply(d||
e,arguments);var f=!1!==c?a.apply(e||d,arguments):null}else f=a.apply(e||d,arguments),c=b.apply(d||e,arguments);return h?c:f}}function da(){return!1}function ka(){return!0}function ea(a,b){var d;if(d=b)d=!(b&&Ga("(?:^|\\s)"+b+"(?!\\S)").test(a.className));d&&(a.className+=" "+b)}function N(a,b){b&&(a.className=a.className.replace(Ga("(?:^|\\s)"+b+"(?!\\S)"),""))}function fa(a){var b={top:0,left:0},d=window.document.documentElement;if(!Sa(a)||a===window)return b;a.getBoundingClientRect&&(b=a.getBoundingClientRect());
return{top:b.top+Ta()-d.clientTop,left:b.left+Ua()-d.clientLeft}}function la(a,b,d,e){return setTimeout(function(){a.apply(b,d||[])},e||0)}function Q(a){if(!a)return!1;var b,d;return"object"!=(d=typeof a)&&"function"!=d?!1:n(b=a.then)?b:!1}function X(a){if(a&&void 0!=!a.length&&a!==""+a){for(var b=[],d=-1,e=a.length>>>0;++d!==e;b[d]=a[d]);return b}return a?[a]:[]}function H(a,b){return a.getAttribute?a.getAttribute(b):null}function Ha(a){return a===window||a&&a.document&&a.location&&a.alert&&a.setInterval}
function ma(a){a=I(a);return 3>a&&-1<a}function Ia(a,b){b=(b||window.document).createDocumentFragment();var d;if(z(a)){var e=window.document.createElement("div");e.innerHTML=a;a=e.childNodes}if(!a)return b;if(a.nodeType)b.appendChild(a);else{if(a.item){var g=a;a=[];e=-1;for(d=g.length>>>0;++e!==d;a.push(g[e]));}e=-1;for(d=a.length;++e!==d;b.appendChild(a[e]));}return b}var K=Array.prototype.slice,Va=Object.prototype.toString,I=function(){var a={"[object String]":0,"[object Number]":1,"[object Boolean]":2,
"[object Object]":3,"[object Function]":4,"[object Array]":5,"[object RegExp]":9,"[object Date]":10};return function(b){if(!b){if(null===b)return 6;if(void 0===b)return 7}var d=a[Va.call(b)];return void 0===d?-1:1===d&&isNaN(b)?8:d}}(),v=function(){return function b(){var d=!1,e=!1,g=K.call(arguments),h=g.shift(),c,f,k;Ea(g[g.length-1])&&(d=g.pop());Ea(g[g.length-1])&&(e=d,d=g.pop());for(;g.length;)if((c=g.shift())&&c.hasOwnProperty)for(f in c)if(c.hasOwnProperty(f)&&void 0!==(k=c[f]))if(e)if(h[f]&&
ca(h[f])&&ca(k))b(h[f],k,d,e);else{if(!0===d||void 0==h[f])ca(k)?(h[f]={},b(h[f],k,d,!0)):h[f]=k}else if(!0===d||void 0==h[f])h[f]=k;return h}}(),u=Function.prototype.bind?function(a,b){return a.bind(b)}:function(a,b){return function(){return a.apply(b,arguments)}},Wa=function(){var a,b=function(b){var d={},g=[];0==arguments.length&&(b=!0);return{addFinder:function(a,c,f){g[f?"unshift":"push"]({fn:a,context:c})},add:function(a,c,f){if(d[a]&&!1===d[a].rewritable)return d[a];d[a]={rewritable:"undefined"!=
typeof f?f:b,value:c};return c},get:function(a){if(d[a])return d[a].value;if(g.length){var c;var f=0;for(c=g.length;f<c;f++){var b=g[f].fn.call(g[f].context,a,this);if(void 0!==b)return this.add(a,b,!0)}}},remove:function(a){var c=d[a];c&&!0===c.rewritable&&delete d[a];return c?c.value:void 0},exists:function(a){return!!d[a]},eachEntry:function(a,c){for(var f in d)a.call(c,d[f].value,f)},destroy:function(){this===a&&(a=null);this.remove=this.exists=this.destroy=this.get=this.add=b=d=null}}};b.global=
function(){a||(a=new b(!0));return a};return b}(),ta=function(){var a=function(a,b,h){h=h||new Wa(!1);var c=b?b.length:null;a||(a="undefined"!==typeof global?global:window);var f=function(a){return a&&b&&a.substr(0,c)!==b?b+"."+a:a},k=function(c,d){c=f(c);if(h.exists(c))return h.get(c);if(!d){d=c.split(".");var k,m=d.length,e=a;for(k=0;k<m;k++){var l=d[k];if(b&&0===k&&l===b)e=a;else{if(void 0===e[l])return;e=e[l]}}e&&h.add(c,e);return e}};this.register=function(c,d){c=f(c);var k=c.split("."),m=k.pop();
var e=k.join(".");var l=k.length,g=a;if(h[e])c=[h[e],m,c];else{if(0<l)for(e=0;e<l;e++){var na=k[e];b&&0===e&&na===b?g=a:(void 0===g[na]&&(g[na]={}),g=g[na])}c=[g,m,c]}k=c[0];m=c[1];Fa(k)&&void 0===k[m]&&(k[m]=d,h.add(c[2],d));return d};this.exists=function(a){return void 0!==k(a,!0)};this.get=k;this.add=function(a,c){a=f(a);h.add(a,c);return c};this.remove=function(a){a=f(a);h.remove(a)};this.normalize=f;this.makeAlias=function(a,c){a=f(a);c=f(c);a=h.get(a);void 0!==a&&h.add(c,a)};this.destroy=function(){var a;
this===d&&(d=null);h.eachEntry(function(a){a&&a.$destroy&&a.$destroy()});h.destroy();h=null;for(a in this)this[a]=null}},b=a.prototype;b=b.register=b.exists=b.get=b.add=b.remove=b.normalize=b.makeAlias=b.destroy=null;var d;a.global=function(){d||(d=new a);return d};return a}(),Xa=function(a,b){var d=function(){};d.prototype=a.prototype;d=new d;a=a.apply(d,b);return Fa(a)||!1===a?a:d},P=function(){var a=function(){this.$super&&this.$super!==M&&this.$super.apply(this,arguments)},b=function(a,c,f){var $super=
a.prototype[c]||("$constructor"===c?a:M)||M;return function(){var a=this.$super;if(this.$destroyed)return this.$super=null;this.$super=$super;var c=f.apply(this,arguments);this.$super=a;return c}},d=function(a,c,f,d){var k,e=f.prototype;for(k in c)if(c.hasOwnProperty(k)){var g=e[k];var h=c[k];a[k]=!n(h)||g&&!n(g)?h:b(f,k,h)}d||(a.$plugins=null,a.$pluginMap=null,e.$beforeInit?(a.$beforeInit=e.$beforeInit.slice(),a.$afterInit=e.$afterInit.slice(),a.$beforeDestroy=e.$beforeDestroy.slice(),a.$afterDestroy=
e.$afterDestroy.slice()):(a.$beforeInit=[],a.$afterInit=[],a.$beforeDestroy=[],a.$afterDestroy=[]))},e=function(b){b||(b=new ta);var c=function(a){return function(){var c=[],f=[],d=arguments,k,e;if(!this)throw"Must instantiate via new: "+a;this.$plugins=[];(k=this.$constructor.apply(this,arguments))&&J(k)&&(d=k);var m=this.$plugins;var g=this.$pluginMap={};k=-1;for(e=this.$beforeInit.length;++k<e;c.push([this.$beforeInit[k],this]));k=-1;for(e=this.$afterInit.length;++k<e;f.push([this.$afterInit[k],
this]));if(m&&m.length)for(k=0,e=m.length;k<e;k++){var l=m[k];if(z(l)){var w=l;l=b.get(l,!0);if(!l)throw w+" not found";}l=new l(this,d);g[l.$class]=l;l.$beforeHostInit&&c.push([l.$beforeHostInit,l]);l.$afterHostInit&&f.push([l.$afterHostInit,l]);m[k]=l}k=-1;for(e=c.length;++k<e;c[k][0].apply(c[k][1],d));this.$init&&this.$init.apply(this,d);k=-1;for(e=f.length;++k<e;f[k][0].apply(f[k][1],d));}},f=function(){};v(f.prototype,{$class:null,$extends:null,$plugins:null,$pluginMap:null,$mixins:null,$destroyed:!1,
$destroying:!1,$constructor:M,$init:M,$beforeInit:[],$afterInit:[],$beforeDestroy:[],$afterDestroy:[],$getClass:function(){return this.$class},$is:function(a){return m(this,a)},$getParentClass:function(){return this.$extends},$intercept:function(a,c,f,b,k){var d=this[a];this[a]=Ra(d||M,c,f||this,this,b,k);return d||M},$implement:function(a){var c=this.constructor;c&&c.$parent&&d(this,a,c.$parent,!0)},$hasPlugin:function(a){return!!this.$pluginMap[b.normalize(a)]},$getPlugin:function(a){return this.$pluginMap[b.normalize(a)]||
null},$bind:function(a){var c=this;return function(){if(!c.$isDestroyed())return a.apply(c,arguments)}},$isDestroyed:function(){return l.$destroying||l.$destroyed},$destroy:function(){var a=this.$beforeDestroy,c=this.$afterDestroy,f=this.$plugins,b;if(!this.$destroying&&!this.$destroyed){this.$destroying=!0;var k=-1;for(b=a.length;++k<b;a[k].apply(this,arguments));k=0;for(b=f.length;k<b;k++)f[k].$beforeHostDestroy&&f[k].$beforeHostDestroy.call(f[k],arguments);a=this.destroy.apply(this,arguments);
k=-1;for(b=c.length;++k<b;c[k].apply(this,arguments));k=0;for(b=f.length;k<b;k++)f[k].$destroy.apply(f[k],arguments);if(!1!==a)for(k in this)this.hasOwnProperty(k)&&(this[k]=null);this.$destroying=!1;this.$destroyed=!0}},destroy:function(){}});f.$self=f;f.$instantiate=function(){var a=arguments;switch(a.length){case 0:return new this;case 1:return new this(a[0]);case 2:return new this(a[0],a[1]);case 3:return new this(a[0],a[1],a[2]);case 4:return new this(a[0],a[1],a[2],a[3]);default:return Xa(this,
a)}};f.$override=function(a){var c=this.$self,f=this.$parent;c&&f&&d(c.prototype,a,f)};f.$extend=function(a,c){return k(a,c,this)};f.$destroy=function(){for(var a in this)this[a]=null};var k=function(k,e,m){k=k||{};var g=k.$class,l=m||k.$extends,h=k.$mixins;m=k.$alias;var w,q;if(l)if(z(l))var r=b.get(l);else r=l,l=r.$class||"";else r=f,l="";if(l&&!r)throw l+" not found";g&&(g=b.normalize(g));k.$class=g;k.$extends=l;k.$mixins=null;l=Object.create(r.prototype);k.$constructor=k.$constructor||a;d(l,k,
r);if(h)for(k=0,w=h.length;k<w;k++){var n=h[k];z(n)&&(n=b.get(n,!0));var t=void 0,x=l;for(t in n)n.hasOwnProperty(t)&&("$beforeInit"===t?x.$beforeInit.push(n[t]):"$afterInit"===t?x.$afterInit.push(n[t]):"$beforeDestroy"===t?x.$beforeDestroy.push(n[t]):"$afterDestroy"===t?x.$afterDestroy.push(n[t]):x[t]||(x[t]=n[t]))}h=c(g);l.constructor=h;l.$self=h;h.prototype=l;for(q in f)"prototype"!==q&&f.hasOwnProperty(q)&&(h[q]=f[q]);for(q in r)"prototype"!==q&&r.hasOwnProperty(q)&&(h[q]=r[q]);if(e)for(q in e)"prototype"!==
q&&e.hasOwnProperty(q)&&(h[q]=e[q]);h.$parent=r;h.$self=h;g&&b.register(g,h);m&&b.register(m,h);return h},m=function(a,c){return(c=z(c)?b.get(c):c)?a instanceof c:!1},l=this;l.factory=function(a){var c=b.get(a),f=K.call(arguments,1);if(!c)throw a+" not found";return c.$instantiate.apply(c,f)};l.isSubclassOf=function(a,c){var f=a,k=b.get;c=z(c)?b.normalize(c):c.prototype.$class;for(z(a)&&(f=k(b.normalize(a)));f&&f.prototype;){if(f.prototype.$class===c)return!0;f=f.$parent}return!1};l.isInstanceOf=
m;l.define=k;l.destroy=function(){l===g&&(g=null);f.$destroy();f=null;b.destroy();e=b=null};l.BaseClass=f};e.prototype={factory:null,isSubclassOf:null,isInstanceOf:null,define:null,destroy:null};var g;e.global=function(){g||(g=new e(ta.global()));return g};return e}(),L=new ta({},"MetaphorJs"),Y=(new P(L)).define,Z=function(a){if(a instanceof Z)return a;if(!(this instanceof Z))return new Z(a);for(var b in a)if(!this[b])try{this[b]=a[b]}catch(g){}this.originalEvent=a;this.type=a.type;!this.target&&
a.srcElement&&(this.target=a.srcElement);var d=a.button;if(void 0===this.pageX&&null!==a.clientX){var e=this.target?this.target.ownerDocument||window.document:window.document;b=e.documentElement;e=e.body;this.pageX=a.clientX+(b&&b.scrollLeft||e&&e.scrollLeft||0)-(b&&b.clientLeft||e&&e.clientLeft||0);this.pageY=a.clientY+(b&&b.scrollTop||e&&e.scrollTop||0)-(b&&b.clientTop||e&&e.clientTop||0)}this.which||void 0===d||(this.which=d&1?1:d&2?3:d&4?2:0);this.isDefaultPrevented=a.defaultPrevented||void 0===
a.defaultPrevented&&!1===a.returnValue?ka:da;this.timeStamp=a&&a.timeStamp||(new Date).getTime()};v(Z.prototype,{isDefaultPrevented:da,isPropagationStopped:da,isImmediatePropagationStopped:da,preventDefault:function(){var a=this.originalEvent;this.isDefaultPrevented=ka;a.returnValue=!1;a&&a.preventDefault&&a.preventDefault()},stopPropagation:function(){var a=this.originalEvent;this.isPropagationStopped=ka;a.cancelBubble=!0;a&&a.stopPropagation&&a.stopPropagation()},stopImmediatePropagation:function(){var a=
this.originalEvent;this.isImmediatePropagationStopped=ka;a&&a.stopImmediatePropagation&&a.stopImmediatePropagation();this.stopPropagation()}},!0,!1);var Ja=function(a){function b(){e=null}var d,e;a=function(a){return function(g){var c=new Z(g||window.event),f=K.call(arguments,1),k=0,m=0,l=0,h=0;c.type="mousewheel";"detail"in c&&(m=-1*c.detail);"wheelDelta"in c&&(m=c.wheelDelta);"wheelDeltaY"in c&&(m=c.wheelDeltaY);"wheelDeltaX"in c&&(k=-1*c.wheelDeltaX);"axis"in c&&c.axis===c.HORIZONTAL_AXIS&&(k=
-1*m,m=0);var q=0===m?k:m;"deltaY"in c&&(q=m=-1*c.deltaY);"deltaX"in c&&(k=c.deltaX,0===m&&(q=-1*k));if(0!==m||0!==k){var r=Math.max(Math.abs(m),Math.abs(k));if(!e||r<e)e=r,"mousewheel"===c.type&&0===r%120&&(e/=40);"mousewheel"===c.type&&0===r%120&&(q/=40,k/=40,m/=40);q=Math[1<=q?"floor":"ceil"](q/e);k=Math[1<=k?"floor":"ceil"](k/e);m=Math[1<=m?"floor":"ceil"](m/e);this.getBoundingClientRect&&(r=this.getBoundingClientRect(),l=c.clientX-r.left,h=c.clientY-r.top);c.deltaX=k;c.deltaY=m;c.deltaFactor=
e;c.offsetX=l;c.offsetY=h;c.deltaMode=0;f.unshift(c,q,k,m);d&&clearTimeout(d);d=setTimeout(b,200);return a.apply(this,f)}}};a.events=function(){var a=window.document;return"onwheel"in a||9<=a.documentMode?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"]};return a}(),W=function(){var a=null,b=null;return function(d,e,g){null===a&&(d.addEventListener?(a="addEventListener",b=""):(a="attachEvent",b="on"));if("mousewheel"==e){g=Ja(g);e=Ja.events();var h;var c=0;for(h=e.length;c<h;c++)d[a](b+
e[c],g,!1)}else d[a](b+e,g,!1);return g}}(),ua=function(){var a=null,b=null;return function(d,e,g){null===a&&(d.removeEventListener?(a="removeEventListener",b=""):(a="detachEvent",b="on"));d[a](b+e,g)}}(),Ga=function(){var a={};return function(b){return a[b]||(a[b]=new RegExp(b))}}(),Sa=function(){return function d(b){if(b===window)return!0;if(3==b.nodeType)return b.parentElement?d(b.parentElement):!0;var e=window.document.documentElement;return b===e?!0:e.contains(b)}}();P=function(a){var b=a?"pageYOffset":
"pageXOffset",d=a?"scrollTop":"scrollLeft";a=window.document;var e=a.body,g=a.documentElement,h=function(a,c){return 0>a&&!1===c?0:a};var c=void 0!==window[b]?function(){return window[b]}:g.clientHeight?function(){return g[d]}:function(){return e[d]};return function(a,b){return a&&a!==window?a&&1==a.nodeType&&a!==e&&a!==g?h(a[d],b):h(c(),b):h(c(),b)}};var Ta=P(!0),Ua=P(!1),y=function(a,b,d){if(window.getComputedStyle){if(a===window)return b?d?0:null:{};a=getComputedStyle(a,null)}else a=a.currentStyle||
a.style||{};b=b?a[b]:a;return d?parseFloat(b)||0:b},Za=function(){var a;return function(){if(void 0===a){var b=window.document,d=b.createElement("div"),e=b.createElement("div");b=b.body;e.style&&window.getComputedStyle?(d.style.cssText="border:0;width:0;height:0;top:0;left:-9999px;margin-top:1px;position:absolute",d.appendChild(e),e.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",
e.innerHTML="",b.appendChild(d),e="4px"===window.getComputedStyle(e,null).width,b.removeChild(d),a=e):a=!1}return a}}();P=function(a,b){var d=/^([+-]?(?:d*.|)d+(?:[eE][+-]?d+|))(?!px)[a-z%]+$/i,e=["Top","Right","Bottom","Left"],g=a?"inner"===a?"padding":"":"content";return function(a,c){if(a===window)return a.document.documentElement["client"+b];if(9===a.nodeType)return c=a.documentElement,Math.max(a.body["scroll"+b],c["scroll"+b],a.body["offset"+b],c["offset"+b],c["client"+b]);a:{var f=b.toLowerCase(),
k=g||(!0===c?"margin":"border");c=y(a);var m=!0,l="width"===f?a.offsetWidth:a.offsetHeight,h="border-box"===c.boxSizing;if(0>=l||null==l){l=a.style[f];if(d.test(l)){c=l;break a}m=h&&(Za()||l===a.style[f]);l=parseFloat(l)||0}a=l;k=k||(h?"border":"content");f=k===(m?"border":"content")?4:"width"===f?1:0;for(h=0;4>f;f+=2)"margin"===k&&(h+=parseFloat(c[k+e[f]])),m?("content"===k&&(h-=parseFloat(c["padding"+e[f]])),"margin"!==k&&(h-=parseFloat(c["border"+e[f]+"Width"]))):(h+=parseFloat(c["padding"+e[f]]),
"padding"!==k&&(h+=parseFloat(c["border"+e[f]+"Width"])));c=a+h}return c}};var oa=P("outer","Width"),pa=P("outer","Height");(function(){var a=/(auto|scroll)/,b,d=function(a){return(a=y(a))?a.overflow+a.overflowY+a.overflowY:""};return function(e){b||(b=window.document.body);for(;e&&e!==b;){if(a.test(d(e)))return e;e=e.parentNode}return window}})();var qa=function(){var a=["Moz","Webkit","ms","O","Khtml"],b="animationDelay",d="animationDuration",e="transitionDelay",g="transitionDuration",h="transform",
c=null,f=null,k=!1;return function(){if(!k){var m=window.document.createElement("div"),l=!1,w;if(void 0!==m.style.animationName)l=!0;else{var q=0;for(w=a.length;q<w;q++){var r=a[q];if(void 0!==m.style[r+"AnimationName"]){l=!0;b=r+"AnimationDelay";d=r+"AnimationDuration";e=r+"TransitionDelay";g=r+"TransitionDuration";h=r+"Transform";break}}}l&&("ontransitionend"in window?c="transitionend":"onwebkittransitionend"in window&&(c="webkitTransitionEnd"));f=l?{animationDelay:b,animationDuration:d,transitionDelay:e,
transitionDuration:g,transform:h,transitionend:c}:{};k=!0}return f}}(),Ka=function(){var a=function(a){if(!a)return 0;var c=parseFloat(a);-1===a.indexOf("ms")&&(c*=1E3);return c},b=function(c,b,d){var f,k=b.length;for(f=0;f<k;f++){var e=a(b[f])+a(d[f]);c=Math.max(e,c)}return c},d=!1,e=null,g=null,h=null,c=null;return function(a){!1===d&&(e=(d=qa())?d.animationDuration:null,g=d?d.animationDelay:null,h=d?d.transitionDuration:null,c=d?d.transitionDelay:null);if(!d)return 0;var f=window.getComputedStyle?
window.getComputedStyle(a,null):a.style;a=0;var m=(f[e]||"").split(","),l=(f[g]||"").split(","),w=(f[h]||"").split(",");f=(f[c]||"").split(",");a=Math.max(a,b(a,m,l));return a=Math.max(a,b(a,w,f))}}(),ra=function(){var a=["0","0","0"];return function(){for(var b=a.length,d;b;){b--;d=a[b].charCodeAt(0);if(57==d)return a[b]="A",a.join("");if(90==d)a[b]="0";else return a[b]=String.fromCharCode(d+1),a.join("")}a.unshift("0");return a.join("")}}(),F=function(){var a={};return function(b,d,e){b=b._mjsid||
(b._mjsid=ra());var g=a[b];return void 0!==e?(g||(g=a[b]={}),g[d]=e):g?g[d]:void 0}}(),$a=function(a){var b=F(a,"mjsAnimationQueue");if(J(b)&&b.length){if(b=b[0]){if(b.stages){var d=b.position;var e=b.stages;N(a,e[d]);N(a,e[d]+"-active")}b.deferred&&b.deferred.reject(b.el)}}else n(b)?b(a):"stop"===b&&$(a).stop(!0,!0);F(a,"mjsAnimationQueue",null)},aa=function(){var a=[],b=function(b){var d;var g=0;for(d=a.length;g<d;g++)if(!1===a[g][0].call(a[g][1],b))return;g=(b?b.stack:null)||Error().stack;if("undefined"!=
typeof console&&console.error)b&&console.error(b),g&&console.error(g);else throw b;};b.on=function(d,e){b.un(d,e);a.push([d,e])};b.un=function(b,e){var d;var h=0;for(d=a.length;h<d;h++)if(a[h][0]===b&&a[h][1]===e){a.splice(h,1);break}};return b}(),sa=function(){var a=[],b=!1,d="undefined"!==typeof process?process.nextTick:function(a){setTimeout(a,0)},e=function(){b=!0;var c=a.shift();d(function(){c[0].apply(c[1],c[2]);a.length?e():b=!1},0)},g=function(c,k,d){d=d||[];a.push([c,k,d]);b||e()},h=function(a,
c){return function(f){try{c.resolve(a(f))}catch(l){c.reject(l)}}},c=function(a,b){if(a instanceof c)return a;if(!(this instanceof c))return new c(a,b);var f;this._fulfills=[];this._rejects=[];this._dones=[];this._fails=[];if(0<arguments.length)if(f=Q(a))a instanceof c?a.then(u(this.resolve,this),u(this.reject,this)):(new c(f,a)).then(u(this.resolve,this),u(this.reject,this));else if(n(a))try{a.call(b,u(this.resolve,this),u(this.reject,this))}catch(l){this.reject(l)}else this.resolve(a)};v(c.prototype,
{_state:0,_fulfills:null,_rejects:null,_dones:null,_fails:null,_wait:0,_value:null,_reason:null,_triggered:!1,isPending:function(){return 0===this._state},isFulfilled:function(){return 1===this._state},isResolved:function(){return 1===this._state},isRejected:function(){return 2===this._state},hasListeners:function(){var a=[this._fulfills,this._rejects,this._dones,this._fails],c;var b=0;for(c=a.length;b<c;b++)if(a[b]&&a[b].length)return!0;return!1},_cleanup:function(){this._fails=this._dones=this._rejects=
this._fulfills=null},_processValue:function(a,b){var f;if(0===this._state)if(a===this)this._doReject(new TypeError("cannot resolve promise with itself"));else{try{if(f=Q(a)){a instanceof c?a.then(u(this._processResolveValue,this),u(this._processRejectReason,this)):(new c(f,a)).then(u(this._processResolveValue,this),u(this._processRejectReason,this));return}}catch(l){0===this._state&&this._doReject(l);return}b.call(this,a)}},_callResolveHandlers:function(){this._done();for(var a=this._fulfills,c;c=
a.shift();)g(c[0],c[1],[this._value]);this._cleanup()},_doResolve:function(a){this._value=a;this._state=1;0===this._wait&&this._callResolveHandlers()},_processResolveValue:function(a){this._processValue(a,this._doResolve)},resolve:function(a){if(this._triggered)return this;this._triggered=!0;this._processResolveValue(a);return this},_callRejectHandlers:function(){this._fail();for(var a=this._rejects,c;c=a.shift();)g(c[0],c[1],[this._reason]);this._cleanup()},_doReject:function(a){this._state=2;this._reason=
a;0===this._wait&&this._callRejectHandlers()},_processRejectReason:function(a){this._processValue(a,this._doReject)},reject:function(a){if(this._triggered)return this;this._triggered=!0;this._processRejectReason(a);return this},then:function(a,b,d){var f=new c,k=this._state;d&&(a&&(a=u(a,d)),b&&(b=u(b,d)));0===k||0!==this._wait?(a&&n(a)?this._fulfills.push([h(a,f),null]):this._fulfills.push([f.resolve,f]),b&&n(b)?this._rejects.push([h(b,f),null]):this._rejects.push([f.reject,f])):1===k?a&&n(a)?g(h(a,
f),null,[this._value]):f.resolve(this._value):2===k&&(b&&n(b)?g(h(b,f),null,[this._reason]):f.reject(this._reason));return f},"catch":function(a){return this.then(null,a)},_done:function(){for(var a=this._dones,c;c=a.shift();)try{c[0].call(c[1]||null,this._value)}catch(m){aa(m)}},done:function(a,c){var b=this._state;if(1===b&&0===this._wait)try{a.call(c||null,this._value)}catch(l){aa(l)}else 0===b&&this._dones.push([a,c]);return this},_fail:function(){for(var a=this._fails,c;c=a.shift();)try{c[0].call(c[1]||
null,this._reason)}catch(m){aa(m)}},fail:function(a,c){var b=this._state;if(2===b&&0===this._wait)try{a.call(c||null,this._reason)}catch(l){aa(l)}else 0===b&&this._fails.push([a,c]);return this},always:function(a,c){this.done(a,c);this.fail(a,c);return this},promise:function(){return{then:u(this.then,this),done:u(this.done,this),fail:u(this.fail,this),always:u(this.always,this)}},after:function(a){var c=this;if(Q(a)){c._wait++;var b=function(){c._wait--;0===c._wait&&0!==c._state&&(1===c._state?c._callResolveHandlers():
c._callRejectHandlers())};n(a.done)?a.done(b):a.then(b)}return c}},!0,!1);c.fcall=function(a,b,d){return c.resolve(a.apply(b,d||[]))};c.resolve=function(a){var b=new c;b.resolve(a);return b};c.reject=function(a){var b=new c;b.reject(a);return b};c.all=function(a){if(!a.length)return c.resolve(null);var b=new c,f=a.length,d=Array(f),e=f,g,h,p=function(a,c){d[c]=a;e--;0===e&&b.resolve(d)};for(g=0;g<f;g++)(function(f){h=a[g];h instanceof c?h.done(function(a){p(a,f)}).fail(b.reject,b):Q(h)||n(h)?(new c(h)).done(function(a){p(a,
f)}).fail(b.reject,b):p(h,f)})(g);return b};c.when=function(){return c.all(arguments)};c.allResolved=function(a){if(!a.length)return c.resolve(null);var b=new c,f=a.length,d=[],e=f,g,h=function(a){d.push(a);p()},p=function(){e--;0===e&&b.resolve(d)};for(g=0;g<f;g++){var O=a[g];O instanceof c?O.done(h).fail(p):Q(O)||n(O)?(new c(O)).done(h).fail(p):h(O)}return b};c.race=function(a){if(!a.length)return c.resolve(null);var b=new c,f=a.length,d;for(d=0;d<f;d++){var e=a[d];e instanceof c?e.done(b.resolve,
b).fail(b.reject,b):Q(e)||n(e)?(new c(e)).done(b.resolve,b).fail(b.reject,b):b.resolve(e);if(!b.isPending())break}return b};c.waterfall=function(a){if(!a.length)return c.resolve(null);var b=a.shift();b=n(b)?c.fcall(b):c.resolve(f);for(var f;f=a.shift();)Q(f)?b=b.then(function(a){return function(){return a}}(f)):n(f)?b=b.then(f):b.resolve(f);return b};c.forEach=function(a,b,d,e){var f=a.slice(),k=new c,g=[],l=0,h=function(){if(f.length){var a=f.shift(),m=l;l++;c.fcall(b,d,[a,m]).done(function(a){g.push(a);
h()}).fail(function(a){e?k.reject(a):(g.push(null),h())})}else k.resolve(g)};h();return k};c.counter=function(a){var b=new c;b.countdown=function(){a--;0===a&&b.resolve()};return b};return c}(),ha=function(){if("undefined"!==typeof window){var a=window;var b=a.requestAnimationFrame||a.webkitRequestAnimationFrame||a.mozRequestAnimationFrame;var d=a.cancelAnimationFrame||a.webkitCancelAnimationFrame||a.mozCancelAnimationFrame||a.webkitCancelRequestAnimationFrame;if(b)return function(a,g,h){var c=b(g||
h?function(){a.apply(g,h||[])}:a);return function(){d(c)}}}return function(a,b,d){var c=la(a,b,d,0);return function(){clearTimeout(c)}}}(),va=function(){var a={show:["mjs-show"],hide:["mjs-hide"],enter:["mjs-enter"],leave:["mjs-leave"],move:["mjs-move"]},b=0,d=!1,e=!1,g=function(a,c,b){var f=function(){(new Date).getTime()-c>=b?a():ha(f)};ha(f)},h=function(){!1===d&&(d=qa(),e=!!d);return e},c=function Ya(a,b,f,d,e,h,O,n){var l=function(){var c=F(a,"mjsAnimationQueue");return c&&c.length&&c[0].id==
O?!1:(e.reject(a),!0)},m=function(){if(!l()){var d=f;f++;if(f===b.length){e.resolve(a);F(a,"mjsAnimationQueue").shift();var g=F(a,"mjsAnimationQueue");g.length?(g=g[0],c(g.el,g.stages,0,g.start,g.deferred,!1,g.id,g.step)):F(a,"mjsAnimationQueue",null)}else F(a,"mjsAnimationQueue")[0].position=f,Ya(a,b,f,null,e,!1,O,n);N(a,b[d]);N(a,b[d]+"-active")}},w=function(){l()||(ea(a,b[f]+"-active"),sa.resolve(n&&n(a,f,"active")).done(function(){if(!l()){var c=Ka(a);c?g(m,(new Date).getTime(),c):ha(m)}}))},
q=function(){l()||(ea(a,b[f]),sa.waterfall([n&&n(a,f,"start"),function(){return d?d(a):null}]).done(function(){!l()&&ha(w)}))};h?ha(q):q()},f=function(f,d,e,g){var l=new sa,m=F(f,"mjsAnimationQueue")||[],q=++b;if(d){if(z(d))var w=a[d];else if(n(d))var u=d;else if(J(d))if(z(d[0]))w=d;else{var y=d[0];var E=d[1]}if(ca(d)){w=d.stages;u=d.fn;y=d.before;E=d.after;var V=d.options?v({},d.options):{};var t=d.context||null;var x=d.duration||null;e=e||V.start}if(h()&&w)return m.push({el:f,stages:w,start:e,step:g,
deferred:l,position:0,id:q}),F(f,"mjsAnimationQueue",m),1===m.length&&c(f,w,0,e,l,!0,q,g),l;V=V||{};e&&(V.start=function(){e(f)});V.complete=function(){l.resolve(f)};x&&(V.duration=x);if(u&&n(u))return y&&v(f.style,y,!0,!1),e&&e(f),F(f,"mjsAnimationQueue",u.call(t,f,function(){l.resolve(f)})),l;if(window.jQuery){d=$(f);y&&d.css(y);F(f,"mjsAnimationQueue","stop");if(u&&z(u))return d[u](V),l;if(E)return d.animate(E,V),l}}e?(u=e(f),Q(u)?u.done(function(){l.resolve(f)}):l.resolve(f)):l.resolve(f);return l};
f.addAnimationType=function(c,b){a[c]=b};f.stop=$a;f.getPrefixes=qa;f.getDuration=Ka;f.cssAnimationSupported=h;return f}(),ab=function(){var a;return function(){if(null===a){var b=navigator.userAgent;a=parseInt((/msie (\d+)/i.exec(b)||[])[1],10);isNaN(a)&&(a=parseInt((/trident\/.*; rv:(\d+)/i.exec(b)||[])[1],10)||!1)}return a}}(),bb=function(){var a={},b;return function(d){if(void 0===a[d]){if("input"==d&&9==ab())return a[d]=!1;b||(b=window.document.createElement("div"));a[d]=!!("on"+d in b)}return a[d]}}(),
wa=function(){var a=/^[\w[:#.][\w\]*^|=!]*$/,b=/=([^\]]+)/,d=/ *, */,e=/(\([^)]*)\+/,g=/(\[[^\]]+)~/,h=/(~|>|\+)/,c=/ +/,f=/([^[:.#]+)?(?:#([^[:.#]+))?(?:\.([^[:.]+))?(?:\[([^!&^*|$[:=]+)([!$^*|&]?=)?([^:\]]+)?\])?(?::([^(]+)(?:\(([^)]+)\))?)?/,k=/(?:(-?\d*)n)?(?:(%|-)(\d*))?/,m=/\D/,l=/[^(]*\(([^)]*)\)/,w=/\(.*/,q=/\[([^!~^*|$ [:=]+)([$^*|]?=)?([^ :\]]+)?\]/,r=window.document,n=!!r.getElementsByClassName,O=!!r.querySelectorAll,u={"first-child":function(a){return a.parentNode.getElementsByTagName("*")[0]!==
a},"last-child":function(a){for(;(a=a.nextSibling)&&1!==a.nodeType;);return!!a},root:function(a){return"html"!==a.nodeName.toLowerCase()},"nth-child":function(a,c){var b=a.nodeIndex||0,f=c[3]=c[3]?("%"===c[2]?-1:1)*c[3]:0;c=c[1];if(b)return!((b+f)%c);var d=a.parentNode.firstChild;b++;do if(1===d.nodeType&&(d.nodeIndex=++b)&&a===d&&(b+f)%c)return 0;while(d=d.nextSibling);return 1},"nth-last-child":function(a,c){var b=a.nodeIndexLast||0,f=c[3]?("%"===c[2]?-1:1)*c[3]:0;c=c[1];if(b)return!((b+f)%c);var d=
a.parentNode.lastChild;b++;do if(1===d.nodeType&&(d.nodeLastIndex=b++)&&a===d&&(b+f)%c)return 0;while(d=d.previousSibling);return 1},empty:function(a){return!!a.firstChild},parent:function(a){return!a.firstChild},"only-child":function(a){return 1!==a.parentNode.getElementsByTagName("*").length},checked:function(a){return!a.checked},lang:function(a,c){return a.lang!==c&&r.documentElement.lang!==c},enabled:function(a){return a.disabled||"hidden"===a.type},disabled:function(a){return!a.disabled},selected:function(a){return!a.selected}},
y={},v=function(a){return y[a]||(y[a]=new RegExp("(^| +)"+a+"($| +)"))},E={"":function(a,c){return null!==H(a,c)},"=":function(a,c,b){var f;return(f=H(a,c))&&f===b},"&=":function(a,c,b){var f;return(f=H(a,c))&&v(b).test(f)},"^=":function(a,c,b){var f;return(f=H(a,c)+"")&&!f.indexOf(b)},"$=":function(a,c,b){var f;return(f=H(a,c)+"")&&f.indexOf(b)===f.length-b.length},"*=":function(a,c,b){var f;return(f=H(a,c)+"")&&-1!==f.indexOf(b)},"|=":function(a,c,b){var f;return(f=H(a,c)+"")&&(f===b||!!f.indexOf(b+
"-"))},"!=":function(a,c,b){var f;return!(f=H(a,c))||!v(b).test(f)}},z=function(t,x){x=x||r;var p=[],D=null,y,v,B;if(O&&x.querySelectorAll)try{p=X(x.querySelectorAll(t.replace(b,'="$1"')))}catch(gb){D=!0}if(!O||D)if(a.test(t))switch(D=0,t.charAt(0)){case "#":D=t.slice(1);p=r.getElementById(D);p.id!==D&&(p=r.all[D]);p=p?[p]:[];break;case ".":t=t.slice(1);if(n)p=X((p=x.getElementsByClassName(t)).length?p:[]);else{t=" "+t+" ";var z=x.getElementsByTagName("*");for(y=0;x=z[y++];)-1!==(" "+x.className+
" ").indexOf(t)&&(p[D++]=x);p=D?p:[]}break;case ":":z=x.getElementsByTagName("*");y=0;var F=t.replace(l,"$1");for(v=t.replace(w,"");x=z[y++];)u[v]&&!u[v](x,F)&&(p[D++]=x);p=D?p:[];break;case "[":z=x.getElementsByTagName("*");y=0;x=q.exec(t);t=x[1];var G=x[2]||"";for(B=x[3];x=z[y++];)E[G]&&(E[G](x,t,B)||"class"===t&&E[G](x,"className",B))&&(p[D++]=x);p=D?p:[];break;default:p=X((p=x.getElementsByTagName(t)).length?p:[])}else{for(var I=t.split(d),J=I.length-1,M=!!J,L,P,C,N,R,S,T,U,Q,A,H,K;D=I[J--];){P=
(L=D.replace(e,"$1%").replace(g,"$1&").replace(h," $1 ").split(c)).length;y=0;N=" ";for(z=x instanceof DocumentFragment?x.children:[x];C=L[y++];)if(" "!==C&&">"!==C&&"~"!==C&&"+"!==C&&z){C=C.match(f);R=C[1]||"*";S=C[2];T=C[3]?" "+C[3]+" ":"";t=C[4];G=C[5]||"";v=C[7];F="nth-child"===v||"nth-last-child"===v?k.exec("even"===C[8]&&"2n"||"odd"===C[8]&&"2n%1"||!m.test(C[8])&&"0n%"+C[8]||C[8]):C[8];U=[];D=Q=0;for(H=y===P;A=z[Q++];)switch(N){case " ":if(A.getElementsByTagName)for(K=A.getElementsByTagName(R),
A=0;B=K[A++];)S&&B.id!==S||T&&-1==(" "+B.className+" ").indexOf(T)||!(!t||E[G]&&(E[G](B,t,C[6])||"class"===t&&E[G](B,"className",C[6])))||B.yeasss||(u[v]?u[v](B,F):v)||(H&&(B.yeasss=1),U[D++]=B);break;case "~":for(R=R.toLowerCase();(A=A.nextSibling)&&!A.yeasss;)1!==A.nodeType||"*"!==R&&A.nodeName.toLowerCase()!==R||S&&A.id!==S||T&&-1===(" "+A.className+" ").indexOf(T)||!(!t||E[G]&&(E[G](B,t,C[6])||"class"===t&&E[G](B,"className",C[6])))||A.yeasss||(u[v]?u[v](A,F):v)||(H&&(A.yeasss=1),U[D++]=A);break;
case "+":for(;(A=A.nextSibling)&&1!==A.nodeType;);!A||A.nodeName.toLowerCase()!==R.toLowerCase()&&"*"!==R||S&&A.id!==S||T&&-1===(" "+B.className+" ").indexOf(T)||!(!t||E[G]&&(E[G](B,t,C[6])||"class"===t&&E[G](B,"className",C[6])))||A.yeasss||(u[v]?u[v](A,F):v)||(H&&(A.yeasss=1),U[D++]=A);break;case ">":if(A.getElementsByTagName)for(K=A.getElementsByTagName(R),y=0;B=K[y++];)B.parentNode!==A||S&&B.id!==S||T&&-1==(" "+B.className+" ").indexOf(T)||!(!t||E[G]&&(E[G](B,t,C[6])||"class"===t&&E[G](B,"className",
C[6])))||B.yeasss||(u[v]?u[v](B,F):v)||(H&&(B.yeasss=1),U[D++]=B)}z=U}else N=C;if(M){if(!z.concat){U=[];for(A=0;B=z[A];)U[A++]=B;z=U}p=z.concat(1===p.length?p[0]:p)}else p=z}for(D=p.length;D--;)p[D].yeasss=p[D].nodeIndex=p[D].nodeIndexLast=null}return p};z.is=function(a,c){c=z(c,a.parentNode);var b;var f=-1;for(b=c.length;++f<b;)if(c[f]===a)return!0;return!1};return z}(),La=wa.is,xa=function(a,b){this.name=a;this.listeners=[];this.map={};this.hash=ra();this.uni="$$"+a+"_"+this.hash;this.suspended=
!1;this.lid=0;"object"===typeof b&&null!==b?v(this,b,!0,!1):this.returnResult=b};v(xa.prototype,{name:null,listeners:null,map:null,hash:null,uni:null,suspended:!1,lid:null,returnResult:null,autoTrigger:null,lastTrigger:null,triggerFilter:null,filterContext:null,expectPromises:!1,resolvePromises:!1,getName:function(){return this.name},destroy:function(){for(var a in this)this[a]=null},on:function(a,b,d){if(!a)return null;b=b||null;d=d||{};var e=this.uni,g=a||b;if(g[e]&&!d.allowDupes)return null;var h=
++this.lid,c=d.first||!1;g[e]=h;a={fn:a,context:b,uniContext:g,id:h,async:!1,called:0,limit:0,start:1,count:0,append:null,prepend:null};v(a,d,!0,!1);!0===a.async&&(a.async=1);c?this.listeners.unshift(a):this.listeners.push(a);this.map[h]=a;if(this.autoTrigger&&this.lastTrigger&&!this.suspended){var f=this.triggerFilter;this.triggerFilter=function(a){return a.id===h?f?!1!==f(a):!0:!1};this.trigger.apply(this,this.lastTrigger);this.triggerFilter=f}return h},once:function(a,b,d){d=d||{};d.limit=1;return this.on(a,
b,d)},un:function(a,b){var d=-1,e=this.uni,g=this.listeners;a=a==parseInt(a)?parseInt(a):(b||a)[e];if(!a)return!1;b=0;for(var h=g.length;b<h;b++)if(g[b].id===a){d=b;delete g[b].uniContext[e];break}if(-1===d)return!1;g.splice(d,1);delete this.map[a];return!0},hasListener:function(a,b){var d=this.listeners;if(a){b=b||a;a=n(a)?b[this.uni]:parseInt(a);if(!a)return!1;b=0;for(var e=d.length;b<e;b++)if(d[b].id===a)return!0;return!1}return 0<d.length},removeAllListeners:function(){var a=this.listeners,b=
this.uni,d;var e=0;for(d=a.length;e<d;e++)delete a[e].uniContext[b];this.listeners=[];this.map={}},suspend:function(){this.suspended=!0},resume:function(){this.suspended=!1},_prepareArgs:function(a,b){if(a.append||a.prepend)b=K.call(b),a.prepend&&(b=a.prepend.concat(b)),a.append&&(b=b.concat(a.append));return b},trigger:function(){var a=this,b=a.listeners,d=a.returnResult,e=a.triggerFilter,g=a.filterContext,h=a.expectPromises,c=[],f;if(a.suspended)return null;a.autoTrigger&&(a.lastTrigger=K.call(arguments));
if(0===b.length)return null;var k="all"===d||"concat"===d?[]:"merge"===d?{}:null,m,l;for(m="first"===d?[b[0]]:K.call(b);l=m.shift();)if(!(!l||!a.map[l.id]||(b=a._prepareArgs(l,arguments),e&&!1===e.call(g,l,b,a))||l.filter&&!1===l.filter.apply(l.filterContext||l.context,b)||(l.count++,l.count<l.start))){if(l.async&&!h){var w=null;la(l.fn,l.context,b,l.async)}else h?(w=function(c,b,f){return function(d){"pipe"===b&&(f[0]=d,f=a._prepareArgs(c,f));return c.fn.apply(c.context,f)}}(l,d,K.call(arguments)),
w=f?f.then(w):l.fn.apply(l.context,b),w.catch(function(a){console.log(a)})):w=l.fn.apply(l.context,b);l.called++;l.called===l.limit&&a.un(l.id);if("first"===d)return w;if(h)c.push(w),"pipe"===d&&w&&(f=w);else if(null!==d)if("all"===d)k.push(w);else if("concat"===d&&w)k=k.concat(w);else if("merge"===d)v(k,w,!0,!1);else{if("nonempty"===d&&w)return w;if("pipe"===d)k=w,arguments[0]=w;else if("last"===d)k=w;else{if(!1===d&&!1===w)return!1;if(!0===d&&!0===w)return!0}}}return h?(e=sa.all(c),a.resolvePromises&&
null!==d&&"all"!==d&&(e=e.then(function(a){var c,b=a.length;for(c=0;c<b;c++){var f=a[c];if("concat"===d&&f)k=k.concat(f);else if("merge"===d)v(k,f,!0,!1);else{if("nonempty"===d&&f)return f;if(!1===d&&!1===f)return!1;if(!0===d&&!0===f)return!0}}return k})),e):k}},!0,!1);var ya=function(){this.events={}};v(ya.prototype,{createEvent:function(a,b){a=a.toLowerCase();var d=this.events;d[a]||(d[a]=new xa(a,b));return d[a]},getEvent:function(a){a=a.toLowerCase();return this.events[a]},on:function(a,b,d,e){a=
a.toLowerCase();var g=this.events;g[a]||(g[a]=new xa(a));return g[a].on(b,d,e)},once:function(a,b,d,e){e=e||{};e.limit=1;return this.on(a,b,d,e)},un:function(a,b,d){a=a.toLowerCase();var e=this.events;e[a]&&e[a].un(b,d)},relayEvent:function(a,b){a.on(b,this.trigger,this,{prepend:"*"===b?null:[b]})},unrelayEvent:function(a,b){a.un(b,this.trigger,this)},hasListener:function(a,b,d){var e=this.events;if(a)return a=a.toLowerCase(),e[a]?b?e[a].hasListener(b,d):!0:!1;for(a in e)if(e[a].hasListener())return!0;
return!1},hasEvent:function(a){return!!this.events[a]},removeAllListeners:function(a){var b=this.events;if(a)b[a]&&b[a].removeAllListeners();else for(a in b)b[a].removeAllListeners()},trigger:function(){var a=arguments[0],b=this.events,d=null;a=a.toLowerCase();if(b[a]){var e=b[a];d=e.trigger.apply(e,K.call(arguments,1))}(e=b["*"])&&e.trigger.apply(e,arguments);return d},suspendEvent:function(a){a=a.toLowerCase();var b=this.events;b[a]&&b[a].suspend()},suspendAllEvents:function(){var a=this.events,
b;for(b in a)a[b].suspend()},resumeEvent:function(a){a=a.toLowerCase();var b=this.events;b[a]&&b[a].resume()},resumeAllEvents:function(){var a=this.events,b;for(b in a)a[b].resume()},destroyEvent:function(a){var b=this.events;b[a]&&(b[a].removeAllListeners(),b[a].destroy(),delete b[a])},destroy:function(){var a=this.events,b;for(b in a)this.destroyEvent(b);for(b in this)this[b]=null},getApi:function(){if(!this.api){for(var a="createEvent getEvent on un once hasListener removeAllListeners trigger suspendEvent suspendAllEvents resumeEvent resumeAllEvents destroyEvent relayEvent unrelayEvent".split(" "),
b={},d,e=-1,g=a.length;++e<g;d=a[e],b[d]=u(this[d],this));this.api=b}return this.api}},!0,!1);L.register("mixin.Observable",{$$observable:null,$$callbackContext:null,$$events:null,$beforeInit:function(a){this.$$observable=new ya;this.$initObservable(a)},$initObservable:function(a){var b=this.$$observable,d;if(a&&a.callback){var e=a.callback,g=e.context||e.scope||e.$context,h=v({},this.$$events,e.$events,!0,!1);for(d in h)b.createEvent(d,h[d]);e.context=null;e.scope=null;for(d in e)if(e[d])b.on(d,
e[d],g||this);a.callback=null;g&&(this.$$callbackContext=g)}else if(this.$$events)for(d in this.$$events)b.createEvent(d,this.$$events[d])},on:function(){var a=this.$$observable;return a?a.on.apply(a,arguments):null},un:function(){var a=this.$$observable;return a?a.un.apply(a,arguments):null},once:function(){var a=this.$$observable;return a?a.once.apply(a,arguments):null},trigger:function(){var a=this.$$observable;return a?a.trigger.apply(a,arguments):null},$beforeDestroy:function(){this.$$observable.trigger("before-destroy",
this)},$afterDestroy:function(){this.$$observable.trigger("destroy",this);this.$$observable.destroy();this.$$observable=null}});var Ma=function(){var a=qa().transform,b=bb("touchstart"),d=!1,e=function(a,b){a=new Z(a||window.event);var c,f;if(c=a.touches){var d=0;for(f=c.length;d<f;d++){var e=c[d].target;(b===e||b.contains(e))&&v(a,c[d],!0,!1)}}return a},g=function(a){a=new Z(a||window.event);a.preventDefault();a.stopPropagation();return!1},h={draggable:null,blockDocumentEvents:!1,cls:{drag:null},
start:{delay:0,distance:0,hold:0,holdThreshold:20,animate:!1,not:null},end:{restore:!1,animate:!1},drag:{method:"transform",axis:null,handle:null},cursor:{position:"click",offsetX:0,offsetY:0},drop:null,events:{"*":{returnValue:!1,stopPropagation:!0,preventDefault:!0}},helper:{destroy:!0,zIndex:9999,tpl:null,fn:null,context:null,appendTo:null,manualPosition:!1,animate:!1},placeholder:{destroy:!0,tpl:null,fn:null,context:null,animate:!1},boundary:null,callback:{context:null,beforestart:null,start:null,
beforeend:null,end:null,drag:null,drop:null,destroy:null}};return Y({$class:"Draggable",$mixins:["mixin.Observable"],draggable:null,dragEl:null,handleEl:null,holderEl:null,delayTmt:null,holdTmt:null,startEvent:null,lastMoveEvent:null,lastPosition:null,enabled:!0,started:!1,distance:!1,state:null,$constructor:function(a){v(a,h,!1,!0);(a.helper.tpl||a.helper.fn)&&this.$plugins.push("draggable.plugin.Helper");(a.placeholder.tpl||a.placeholder.fn)&&this.$plugins.push("draggable.plugin.Placeholder");a.boundary&&
this.$plugins.push("draggable.plugin.Boundary");a.drop&&this.$plugins.push("draggable.plugin.Drop");this.$super(a)},$init:function(c){v(this,c,!0,!1);b&&!d&&this.blockDocumentEvents&&(c=window.document,W(c,"touchstart",g),W(c,"touchmove",g),W(c,"touchend",g),d=!0);a||(this.drag.method="position");this.state={clickX:null,clickY:null,offsetX:null,offsetY:null,x:null,y:null};var f;(f=this.drag.handle)?this.handleEl="string"==typeof f?wa(f).shift()||this.draggable:f||this.draggable:this.handleEl=this.draggable;
this.holderEl=this.dragEl=this.draggable;this.draggable.$$draggable=this;this.onMousedownDelegate=u(this.onMousedown,this);this.onMousemoveDelegate=u(this.onMousemove,this);this.onMouseupDelegate=u(this.onMouseup,this);this.onScrollDelegate=u(this.onScroll,this);this.trigger("init",this);this.enabled&&(this.enabled=!1,this.enable())},getElem:function(){return this.draggable},enable:function(){this.enabled||!1===this.trigger("enable",this)||(this.enabled=!0,this.setStartEvents("bind"))},disable:function(){this.enabled&&
!1!==this.trigger("disable",this)&&(this.enabled=!1,this.setStartEvents("unbind"))},setStartEvents:function(a){a="bind"==a?W:ua;a(this.handleEl,"mousedown",this.onMousedownDelegate);b&&a(this.handleEl,"touchstart",this.onMousedownDelegate)},setMoveEvents:function(a){a="bind"==a?W:ua;var c=document.documentElement,d=this.draggable;a(c,"mousemove",this.onMousemoveDelegate);a(c,"mouseup",this.onMouseupDelegate);a(window,"scroll",this.onScrollDelegate);b&&(a(d,"touchmove",this.onMousemoveDelegate),a(d,
"touchend",this.onMouseupDelegate),a(d,"touchcancel",this.onMouseupDelegate))},processEvent:function(a){var c=this.events;if(c=c[a.type]||c["*"]){if(c.process)return c.process(a);c.stopPropagation&&a.stopPropagation();c.preventDefault&&a.preventDefault();return c.returnValue}},isValidMousedown:function(a){if(!this.start.not)return!0;a=a.target;for(var c=this.start.not;a;){if(La(a,c))return!1;a=a.parentNode}return!0},onMousedown:function(a){a=e(a,this.handleEl);if(this.isValidMousedown(a))return this.dragStart(a),
this.processEvent(a)},dragStart:function(a){var c=this.start;if(this.enabled&&!this.started)if(this.startEvent=a,!1===this.trigger("before-start",this,a))this.dragStop(a);else if(this.setMoveEvents("bind"),c.hold)this.holdTmt=la(this.onAfterDelay,this,[a],c.hold);else if(c.delay)this.delayTmt=la(this.onAfterDelay,this,[a],c.delay);else this.onAfterDelay(a)},onAfterDelay:function(a){var c=this.start,b=this.startEvent;this.holdTmt=this.delayTmt=null;this.trigger("after-delay",this,a);c.distance?(this.distance=
c.distance,this.state.clickX=b.clientX,this.state.clickY=b.clientY):(this.onActualStart(a),this.dragMove(this.lastMoveEvent||a))},onActualStart:function(a){a=this.startEvent;this.started=!0;this.cacheState();this.trigger("before-actual-start",this,a);this.cls.drag&&ea(this.draggable,this.cls.drag);this.start.animate&&va(this.dragEl,["mjs-drag-start"],null,!1);this.trigger("start",this,a)},cacheState:function(){var a=this.startEvent,b=this.draggable,d=this.cursor.position,e=this.state,g=fa(b);var h=
{top:0,left:0};var q=window.document.documentElement;if(b!==window&&b!==q){if("fixed"==y(b,"position"))var r=b.getBoundingClientRect();else{var p=window.document.documentElement;for(r=b.offsetParent||p;r&&r!=p&&"static"==y(r,"position");)r=r.offsetParent;p=r||p;r=fa(b);p!==q&&(h=fa(p));h.top+=y(p,"borderTopWidth",!0);h.left+=y(p,"borderLeftWidth",!0)}h={top:r.top-h.top-y(b,"marginTop",!0),left:r.left-h.left-y(b,"marginLeft",!0)}}e.clickX=a.clientX;e.clickY=a.clientY;e.x=g.left;e.y=g.top;e.offsetX=
e.clickX-e.x;e.offsetY=e.clickY-e.y;e.left=h.left;e.top=h.top;e.w=oa(b);e.h=pa(b);e.mt=parseInt(y(b,"marginTop"),10);e.ml=parseInt(y(b,"marginLeft"),10);"click"!=d&&(a=oa(b),b=pa(b),-1!=d.indexOf("c")&&(e.offsetX=a/2,e.offsetY=b/2),-1!=d.indexOf("t")?e.offsetY=0:-1!=d.indexOf("b")&&(e.offsetY=b),-1!=d.indexOf("l")?e.offsetX=0:-1!=d.indexOf("r")&&(e.offsetX=a));e.offsetY-=this.cursor.offsetY;e.offsetX-=this.cursor.offsetX},onMousemove:function(a){a=e(a,this.draggable);this.dragMove(a);return this.processEvent(a)},
onScroll:function(){this.dragMove(this.lastMoveEvent)},dragMove:function(a){var b=this.state;this.lastMoveEvent=a;if(!this.delayTmt)if(this.holdTmt)b=this.startEvent,(Math.abs(a.clientX-b.clientX)>=this.start.holdThreshold||Math.abs(a.clientY-b.clientY)>=this.start.holdThreshold)&&this.dragStop(a);else{if(this.distance)if(Math.abs(a.clientX-b.clickX)>=this.distance||Math.abs(a.clientY-b.clickY)>=this.distance){if(this.distance=!1,this.onActualStart(a),!this.started)return}else return;this.lastPosition=
"transform"==this.drag.method?this.applyTransform(a):this.applyPosition(a);this.trigger("drag",this,a,this.lastPosition)}},calcPosition:function(a){var b=this.state,c={};c.left=a.clientX-b.offsetX-(b.x-b.left);c.top=a.clientY-b.offsetY-(b.y-b.top);c.x=a.clientX-b.offsetX;c.y=a.clientY-b.offsetY;c.translateX=a.clientX-b.offsetX-b.x;c.translateY=a.clientY-b.offsetY-b.y;return c},applyTransform:function(b){var c=this.dragEl.style,d="",e=this.drag.axis,g=this.calcPosition(b);this.trigger("correct-position",
this,g,"transform",b);"x"!=e&&(d+=" translateY("+g.translateY+"px)");"y"!=e&&(d+=" translateX("+g.translateX+"px)");c[a]=d;return g},applyPosition:function(b,f,d){f=(f||this.dragEl).style;var c=this.drag.axis,e=this.calcPosition(b);this.trigger("correct-position",this,e,"position",b);"x"!=c&&(f.top=e.top+"px");"y"!=c&&(f.left=e.left+"px");d&&(f[a]="");return e},onMouseup:function(a){a=e(a,this.draggable);this.dragStop(a);return this.processEvent(a)},dragStop:function(a){var b=this;b.setMoveEvents("unbind");
var c=b.lastMoveEvent;b.lastMoveEvent=null;b.delayTmt?(clearTimeout(b.delayTmt),b.delayTmt=null):b.holdTmt?(clearTimeout(b.holdTmt),b.holdTmt=null):b.enabled&&b.started&&(b.trigger("before-end",b,c,a),b.end.animate?va(b.end.restore?b.dragEl:b.holderEl,["mjs-drag-end"],null,!1,null,function(a,d,f){"active"==f&&b.positionOnStop(c)}).done(b.onEndAnimation,b):b.positionOnStop(c))},positionOnStop:function(a){var b=this.draggable,c;this.cls.drag&&N(b,this.cls.drag);this.end.restore?c=this.applyPosition(this.startEvent,
null,!0):b!==this.dragEl?c=this.applyPosition(a,b):"transform"==this.drag.method&&(c=this.applyPosition(a,null,!0));this.started=!1;this.trigger("end",this,a,c||this.lastPosition)},onEndAnimation:function(){this.trigger("end-animation",this)},destroy:function(){this.disable();this.draggable.$$draggable=null}})}(),za=function(){var a={accept:!0,cls:{active:null,over:null},callback:{context:null}},b=[];return Y({$class:"Draggable",$mixins:["mixin.Observable"],droppable:null,enabled:!0,active:!1,accepted:null,
$init:function(d){v(d,a,!1,!0);v(this,d,!0,!1);b.push(this);this.trigger("init",this);this.enabled&&(this.enabled=!1,this.enable());this.droppable.$$droppable=this},isEnabled:function(){return this.enabled},enable:function(){this.enabled||!1===this.trigger("enable",this)||(this.enabled=!0)},disable:function(){this.enabled&&!1!==this.trigger("disable",this)&&(this.enabled=!1)},accepts:function(a){var b=this.accept;if(!0===b||!1===b)return b;if("string"==typeof b)return La(a.getElem(),b);if(n(b))return b.call(this.$$callbackContext,
this,a);a=a.getElem();return b==a},setCurrentDraggable:function(a){return this.accepted===a?!0:this.accepts(a)?(a.on("end",this.releaseDraggable,this),this.cls.active&&ea(this.droppable,this.cls.active),this.active=!0,this.accepted=a,this.trigger("activate",this,a),!0):!1},setDraggableOver:function(a){this.active&&this.accepted==a&&this.cls.over&&ea(this.droppable,this.cls.over)},setDraggableOut:function(a){this.active&&this.accepted==a&&this.cls.over&&N(this.droppable,this.cls.over)},getCoords:function(){var a=
this.droppable,b=fa(a),g={};g.x=b.left;g.y=b.top;g.w=oa(a);g.h=pa(a);g.x1=g.x+g.w;g.y1=g.y+g.h;return g},drop:function(a){this.active&&this.accepted==a&&this.trigger("drop",this,a)},releaseDraggable:function(a){a.un("end",this.releaseDraggable,this);this.active=!1;this.accepted=null;this.cls.active&&N(this.droppable,this.cls.active);this.cls.over&&N(this.droppable,this.cls.over);this.trigger("deactivate",this)},destroy:function(){this.droppable.$$droppable=null;this.accepted&&this.releaseDraggable(this.accepted);
var a=b.indexOf(this);b.splice(a,1)}},{getAll:function(){return b}})}(),ia=function(){return String.prototype.trim?function(a){return z(a)?a.trim():a}:function(a){return z(a)?a.replace(/^\s\s*/,"").replace(/\s\s*$/,""):a}}(),Na=function(a,b,d){var e=a.length,g=b.length,h=0,c=0,f=!1,k=!1,m=[];if(!g)return[a];for(;h<e;h++){var l=a.charAt(h);if("\\"==l)h++;else if('"'==l)f=!f;else if("'"==l)k=!k;else if(!f&&!k&&(1==g&&l==b||1<g&&a.substring(h,h+g)==b)){if(a.substr(h-1,g)!=b&&a.substr(h+1,g)!=b||d)m.push(a.substring(c,
h).replace("\\"+b,b)),c=h+g;h+=g-1}}m.push(a.substring(c).replace("\\"+b,b));return m},Aa=function(){return function e(b,d){if(b===d)return!0;if(null===b||null===d)return!1;if(b!==b&&d!==d)return!0;var g=typeof b,h;if(g==typeof d&&"object"==g)if(J(b)){if(!J(d))return!1;if((g=b.length)==d.length){for(h=0;h<g;h++)if(!e(b[h],d[h]))return!1;return!0}}else{if(10===I(b))return 10===I(d)&&b.getTime()==d.getTime();if(9===I(b)&&9===I(d))return b.toString()==d.toString();if(Ha(b)||Ha(d)||J(d))return!1;g={};
for(h in b)if("$"!=h.charAt(0)&&!n(b[h])){if(!e(b[h],d[h]))return!1;g[h]=!0}for(h in d)if(!g.hasOwnProperty(h)&&"$"!=h.charAt(0)&&void 0!==d[h]&&!n(d[h]))return!1;return!0}return!1}}(),Ba=function(){var a="undefined"!=typeof window?window:null,b="undefined"!=typeof global?global:null;return function h(e,g){if(a&&e===a)throw Error("Cannot copy window object");if(b&&e===b)throw Error("Cannot copy global object");if(g){if(e===g)throw Error("Objects are identical");if(J(e))for(var c=g.length=0,f=e.length;c<
f;c++)g.push(h(e[c]));else{for(c in g)delete g[c];for(c in e)e.hasOwnProperty(c)&&("$"==c.charAt(0)||n(e[c])?g[c]=e[c]:g[c]=h(e[c]))}}else(g=e)&&(J(e)?g=h(e,[]):10===I(e)?g=new Date(e.getTime()):9===I(e)?g=new RegExp(e.source):ca(e)&&(g=h(e,{})));return g}}(),Oa=function(){var a=/((^|[^a-z0-9_$\]\)'"])|(this))(\.)([^0-9])/ig,b=Function,d={},e=0,g={},h=0,c={},f=0,k=function(){1E3<=e&&(d={});1E3<=h&&(g={});1E3<=f&&(c={})};return{createGetter:function(c,f){try{if(!d[c]||f){e++;var g="".concat("try {",
"return ",c.replace(a,"$2____.$5"),";} catch (thrownError) { return undefined; }");return f?"function(____) {"+g+"}":d[c]=new b("____",g)}return d[c]}catch(q){return aa(q),M}},createSetter:function(c,f){try{if(!g[c]||f){h++;var d=c.replace(a,"$2____.$5"),e="".concat("try {",d," = $$$$",";} catch (thrownError) { return undefined; }");return f?"function(____, $$$$) {"+e+"}":g[c]=new b("____","$$$$",e)}return g[c]}catch(r){return aa(r),M}},createFunc:function(d,e){try{if(!c[d]||e){f++;var g="".concat("try {",
d.replace(a,"$2____.$5"),";} catch (thrownError) { return undefined; }");return e?"function(____) {"+g+"}":c[d]=new b("____",g)}return c[d]}catch(q){return aa(q),M}},resetCache:k,enableResetCacheInterval:function(){setTimeout(k,1E4)}}}(),ja=Oa.createGetter,Pa=Oa.createSetter,Ca=function(){var a=function(a){if(!z(a))return!0;var b=a.substr(0,1),c=a.length-1;return'"'!==b&&"'"!==b||a.indexOf(b,1)!==c?!1:a.substring(1,c)},b,d=function(c,d,e,h,l){b||(b=new ya);l=l||{};var f=ra(),k;l.filterLookup&&(this.filterLookup=
l.filterLookup);this.mock=l.mock;this.origCode=d;l.mock&&-1===d.indexOf(".")?k="attr":d&&c?k=c.hasOwnProperty(d)?"attr":"expr":d&&!c&&(k="expr");if(e)b.on(f,e,h||this,{append:[l.userData],allowDupes:!0});if("expr"===k){d=this._parsePipes(d,c,!0);d=this._parsePipes(d,c,!1);if(this.inputPipes||this.pipes)d=g(c,d),k=c.hasOwnProperty(d)?"attr":"expr";if(this.staticValue=a(d))k="static"}this.userData=l.userData;this.code=d;this.id=f;this.type=k;this.obj=c;"expr"===k&&(this.getterFn=l.getterFn||ja(d));
"static"!==k||this.pipes?(this.curr=this.curr||this._getValue(),this.currCopy=ma(this.curr)?this.curr:Ba(this.curr)):(this.check=da,this.curr=this.prev=this.staticValue)};v(d.prototype,{filterLookup:null,staticValue:null,origCode:null,code:null,getterFn:null,setterFn:null,id:null,type:null,obj:null,itv:null,curr:null,currCopy:null,prev:null,unfilteredCopy:null,unfiltered:null,pipes:null,inputPipes:null,lastSetValue:null,userData:null,obsrvDelegate:null,obsrvChanged:!1,forcePipes:!1,mock:!1,deterministic:!0,
getConfig:function(){var a=null;"expr"===this.type&&(a=ja(this.code,!0));return{type:this.type,code:this.origCode,withoutPipes:this.code,getter:a,hasPipes:null!==this.pipes,hasInputPipes:null!==this.inputPipes}},_indexArrayItems:function(a){var b="$$"+this.id,c;if(a){var d=0;for(c=a.length;d<c;d++){var e=a[d];!e||ma(e)||e[b]||(e[b]=ra())}}},_parsePipes:function(a,b,d){var c=d?">>":"|",f=d?"inputPipes":"pipes",e=d?this.onInputParamChange:this.onPipeParamChange;if(-1===a.indexOf(c))return a;a=Na(a,
c);d=d?a.pop():a.shift();c=[];var g;var k=0;for(g=a.length;k<g;k++){var h=Na(ia(a[k]),":");this._addPipe(c,h,b,e,!1)}c.length&&(this[f]=c);return ia(d)},prependInuptPipe:function(){this.inputPipes=this.inputPipes||[];this._addPipe(this.inputPipes,X(arguments),this.obj,this.onInputParamChange,!0)},addInuptPipe:function(){this.inputPipes=this.inputPipes||[];this._addPipe(this.inputPipes,X(arguments),this.obj,this.onInputParamChange,!1)},addPipe:function(){this.pipes=this.pipes||[];this._addPipe(this.pipes,
X(arguments),this.obj,this.onPipeParamChange,!1)},prependPipe:function(){this.pipes=this.pipes||[];this._addPipe(this.pipes,X(arguments),this.obj,this.onPipeParamChange,!0)},_addPipe:function(a,b,d,g,h){var c=b.shift(),f=n(c)?c:null,k=[],l=f?null:c.substr(0,1),m={neg:!1,dblneg:!1,undeterm:!1,name:c};f?m.name=f.name:"!!"===c.substr(0,2)?(c=c.substr(2),m.dblneg=!0):"!"===l?(c=c.substr(1),m.neg=!0):"?"===l&&(c=c.substr(1),m.undeterm=!0);this.mock?f=function(){}:(!f&&this.filterLookup&&(f=this.filterLookup(c)),
f||(f=("undefined"!==typeof window?window[c]:null)||d[c]));if(n(f)){c=-1;for(l=b.length;++c<l;k.push(e(d,b[c],g,this,{filterLookup:this.filterLookup,mock:this.mock})));f.$undeterministic&&(m.undeterm=!0);a[h?"unshift":"push"]([f,b,k,m]);m.undeterm&&(this.deterministic=!1)}},_getRawValue:function(){if(this.mock)return this.mock;switch(this.type){case "static":var a=this.staticValue;break;case "attr":a=this.obj[this.code];break;case "expr":a=this.getterFn(this.obj);break;case "object":a=this.obj}J(a)&&
(this.inputPipes||this._indexArrayItems(a),a=a.slice());return a},_getValue:function(a){this.unfiltered=a=a?this.unfiltered:this._getRawValue();return a=this.mock?this.mock:this._runThroughPipes(a,this.pipes)},_runThroughPipes:function(a,b){if(b){var c,d=b.length,f=this.obj,e;for(c=0;c<d;c++){var g=b[c][1];var r=b[c][3];var p=[];var n=-1;for(e=g.length;++n<e;p.push(h(g[n],f)));p.unshift(f);p.unshift(a);a=b[c][0].apply(null,p);r.neg?a=!a:r.dblneg&&(a=!!a)}}return a},subscribe:function(a,d,e){b.on(this.id,
a,d,e)},unsubscribe:function(a,d){return b.un(this.id,a,d)},hasPipes:function(){return null!==this.pipes},hasInputPipes:function(){return null!=this.inputPipes},hasPipe:function(a){return this._hasPipe(this.pipes,a)},hasInputPipe:function(a){return this._hasPipe(this.inputPipes,a)},_hasPipe:function(a,b){if(!a)return!1;var c;var d=n(b)?b.name:b;b=0;for(c=a.length;b<c;b++)if(a[b][3].name===d)return!0;return!1},getValue:function(){return this._getValue()},getUnfilteredValue:function(){return this.unfiltered||
this.curr},getPrevValue:function(){return this.prev},getLastValue:function(){return this.curr},getPrescription:function(a,b){b=b||this._getValue();var c=a||[],d=b||[],f=c.length,e=d.length,g=Array(f+1);b=Array(f+1);var h,p=0;if(f==e&&0==f)b=[];else{for(a=0;a<=f;a++)g[a]=Array(e+1),b[a]=Array(e+1),g[a][0]=a,b[a][0]="D";for(a=0;a<=e;a++)g[0][a]=a,b[0][a]="I";for(a=1;a<=f;a++)for(h=1;h<=e;h++){var n=Aa(c[a-1],d[h-1])?0:1;g[a][h-1]<g[a-1][h]&&g[a][h-1]<g[a-1][h-1]+n?(g[a][h]=g[a][h-1]+1,b[a][h]="I"):
g[a-1][h]<g[a-1][h-1]+n?(g[a][h]=g[a-1][h]+1,b[a][h]="D"):(g[a][h]=g[a-1][h-1]+n,b[a][h]=1==n?"R":"-")}c=[];a=f;h=e;do f=b[a][h],c.push(f),"-"!=f&&p++,"R"==f||"-"==f?(a--,h--):"D"==f?a--:h--;while(0!=a||0!=h);b=c.reverse()}return b},getMovePrescription:function(a,b,d){d=d||this._getValue();var c=a||[],f=d||[];a=this.getPrescription(a||[],d||[]);d=[];var e,g,h={},k;var n=0;for(e=c.length;n<e;n++)(g=b(c[n]))&&(h[g]=n);var u=0;var v={};n=0;for(e=a.length;n<e;n++)c=a[n],"D"!==c&&(g=b(f[u]),void 0!==g&&
!0!==v[g]&&void 0!==(k=h[g])?(d.push(k),v[g]=!0):d.push(c),u++);return d},setValue:function(a){var b=this.type;this.lastSetValue=a;a=this._runThroughPipes(a,this.inputPipes);"attr"===b?this.obj[this.code]=a:"expr"===b?(this.setterFn||(this.setterFn=Pa(this.code)),this.setterFn(this.obj,a)):"object"===b&&(this.obj=a)},onInputParamChange:function(a,b,d){this.setValue(this.lastSetValue);d&&this.checkAll()},onPipeParamChange:function(a,b,d){this.forcePipes=!0;this.check();this.forcePipes=!1},_check:function(a){if(this.deterministic&&
this.pipes&&!this.forcePipes)if(this._checkUnfiltered())var c=this._getValue(!0);else return!1;else c=this._getValue();var d=this.currCopy;return Aa(d,c)?!1:(this.curr=c,this.prev=d,this.currCopy=ma(c)?c:Ba(c),b.trigger(this.id,c,d,a),!0)},_checkUnfiltered:function(){var a=this._getRawValue();return Aa(this.unfilteredCopy,a)?!1:(this.unfiltered=a,this.unfilteredCopy=ma(a)?a:Ba(a),!0)},check:function(a){return this._check(a)},checkAll:function(){return this.obj.$$watchers.$checkAll()},getLastResult:function(){return this.curr},
setInterval:function(a){var b=this;b.itv&&b.clearInterval();b.itv=setInterval(function(){b.check()},a)},clearInterval:function(){this.itv&&(clearInterval(this.itv),this.itv=null)},unsubscribeAndDestroy:function(a,d){var c=this.id;if(!c)return!1;a&&b.un(c,a,d);return b.hasListener(c)?!1:(this.destroy(),!0)},destroy:function(){var a=this.pipes,d=this.inputPipes,e,g;this.itv&&this.clearInterval();if(a){var h=-1;for(e=a.length;++h<e;){var n=a[h][2];var q=-1;for(g=n.length;++q<g;)n[q].unsubscribeAndDestroy(this.check,
this)}}if(d)for(h=-1,e=d.length;++h<e;)for(n=d[h][2],q=-1,g=n.length;++q<g;)n[q].unsubscribeAndDestroy(this.onInputParamChange,this);this.obj&&(this.obj.$$watchers.$codes[this.origCode]=null);b.destroyEvent(this.id);for(h in this)this.hasOwnProperty(h)&&(this[h]=null)}},!0,!1);var e=function(a,b,e,h,l){l=l||{};b=g(a,ia(b||""),l.mock);return a?(a.$$watchers||(a.$$watchers={$codes:{},$checkAll:function(){var a=this.$codes,b,c=0;for(b in a)a[b]&&a[b].check()&&c++;return c},$destroyAll:function(){var a=
this.$codes,b;for(b in a)a[b]&&(a[b].destroy(),a[b]=null)}}),a.$$watchers.$codes[b]?a.$$watchers.$codes[b].subscribe(e,h,{append:[l.userData||null],allowDupes:!0}):a.$$watchers.$codes[b]=new d(a,b,e,h,l),a.$$watchers.$codes[b]):new d(a,b,e,h,l)},g=function(a,b,d){"{{"===b.substr(0,2)&&(b=b.substring(2,b.length-2));if(d){var c;return null!==(c=b.match(/(^|this)\.([A-Z0-9_$]+)$/i))?c[2]:b}if(a&&b){if(a.hasOwnProperty(b))return b;if("."===b.charAt(0)){if(d=b.substr(1),a.hasOwnProperty(d))return d}else if("this."===
b.substr(0,5)&&(d=b.substr(5),a.hasOwnProperty(d)))return d}return b},h=function(b,d,g){var c;if(c=a(b))return c;if(-1===b.indexOf("|"))return ja(b)(d);b=e(d,b,null,null,g);d=b.getValue();b.unsubscribeAndDestroy();return d};d.create=e;d.unsubscribeAndDestroy=function(a,b,d,e){b=ia(b);(a=a.$$watchers?a.$$watchers.$codes:null)&&a[b]&&a[b].unsubscribeAndDestroy(d,e)&&(a[b]=null)};d.normalizeExpr=g;d.eval=h;return d}().create,ba=L.get,cb=function(a){return ba("filter."+a,!0)},Da=L.add,Qa=function(){var a=
[],b=!1,d=function(a,b){return a.priority<b.priority?-1:a.priority>b.priority?1:0},e=function(a,b){b=b||"";var c=window.document.createComment(b+" - start");b=window.document.createComment(b+" - end");var d=a.parentNode;d.insertBefore(c,a);a.nextSibling?d.insertBefore(b,a.nextSibling):d.appendChild(b);return[c,b]};return Y({$class:"Directive",watcher:null,stateFn:null,scope:null,node:null,expr:null,mods:null,autoOnChange:!0,$init:function(a,b,c,d,e){d=e?e.config:{};var f;c=ia(c);this.node=b;this.expr=
c;this.scope=a;this.saveState=d.saveState;this.watcher=Ca(a,c,this.onChange,this,{filterLookup:cb});this.saveState&&(this.stateFn=Pa(this.saveState));if(this.autoOnChange&&void 0!==(f=this.watcher.getLastResult()))this.onChange(f,void 0);a.$on("destroy",this.onScopeDestroy,this);a.$on("reset",this.onScopeReset,this)},getChildren:function(){return null},createCommentHolders:function(a,b){a=e(a,b||this.$class);this.prevEl=a[0];this.nextEl=a[1]},onScopeDestroy:function(){this.$destroy()},onScopeReset:function(){},
onChange:function(a){this.saveStateOnChange(a)},saveStateOnChange:function(a){this.stateFn&&this.stateFn(this.scope,a)},destroy:function(){this.scope&&(this.scope.$un("destroy",this.onScopeDestroy,this),this.scope.$un("reset",this.onScopeReset,this));this.watcher&&this.watcher.unsubscribeAndDestroy(this.onChange,this);this.prevEl&&this.prevEl.parentNode.removeChild(this.prevEl);this.nextEl&&this.nextEl.parentNode.removeChild(this.nextEl);this.$super()}},{getDirective:function(a,b){return ba("directive."+
a+"."+b,!0)},registerAttribute:function(d,e,c){ba("directive.attr."+d,!0)||(a.push({priority:e,name:d,handler:Da("directive.attr."+d,c)}),b=!1)},getAttributes:function(){b||(a.sort(d),b=!0);return a},registerTag:function(a,b){ba("directive.tag."+a,!0)||Da("directive.tag."+a,b)},registerComponent:function(a,b){b||(b=a);z(b)&&(b=ba(b,!0));ba("directive.component."+a,!0)||Da("directive.component."+a.toLowerCase(),b)},commentHolders:e})}();(function(){Qa.registerAttribute("draggable",1E3,function(a,b,
d,e,g){var h=ja(d)(a)||{},c=g?g.config:{},f=function(a){m[a?"enable":"disable"]()};h.draggable=b;if(c.if){var k=Ca(a,c.if,f);k.getLastResult()||(h.enabled=!1)}var m=new Ma(h);return function(){k&&(k.unsubscribeAndDestroy(f,null),k=null);f=null;m.$destroy();b=c=h=m=null}})})();(function(){Qa.registerAttribute("droppable",1E3,function(a,b,d,e,g){var h=ja(d)(a)||{},c=g?g.config:{},f=function(a){m[a?"enable":"disable"]()};h.droppable=b;if(c.if){var k=Ca(a,c.if,f);k.getLastResult()||(h.enabled=!1)}var m=
new za(h);return function(){k&&(k.unsubscribeAndDestroy(f,null),k=null);f=null;m.$destroy();c=h=m=null}})})();var db=P("","Width"),eb=P("","Height");Y({$class:"draggable.plugin.Boundary",drg:null,bndEl:null,bnd:null,$init:function(a){this.drg=a},$beforeHostInit:function(){var a=this.drg;a.on("start",this.onStart,this);a.on("correct-position",this.onPosition,this)},$afterHostInit:function(){var a=this.drg.boundary;a&&("string"==typeof a?this.bndEl=wa(a).shift():a.nodeType?this.bndEl=a:J(a)&&(this.bnd=
{x:a[0],y:a[1],x1:a[2],x2:a[3]}))},cacheBoundaries:function(){var a=this.bndEl;if(a){var b=fa(a);if("border-box"==y(a,"boxSizing"))this.bnd={x:b.left,y:b.top,x1:b.left+oa(a),y1:b.top+pa(a)};else{var d=parseInt(y(a,"borderTop"),10),e=parseInt(y(a,"borderLeft"),10);this.bnd={x:b.left+e,y:b.top+d,x1:b.left+e+db(a),y1:b.top+d+eb(a)}}}},onStart:function(){this.cacheBoundaries()},onPosition:function(a,b){a=this.drg.state;var d=this.bnd,e,g=0,h=0;d&&(void 0!=d.x&&0<(e=d.x-b.x)&&(g=e),void 0!=d.x1&&0>(e=
d.x1-(b.x+a.w))&&(g=e),void 0!=d.y&&0<(e=d.y-b.y)&&(h=e),void 0!=d.y1&&0>(e=d.y1-(b.y+a.h))&&(h=e),b.x+=g,b.left+=g,b.translateX+=g,b.y+=h,b.top+=h,b.translateY+=h)}});Y({$class:"draggable.plugin.Drop",drg:null,droppables:null,$init:function(a){this.drg=a;this.droppables=[]},$beforeHostInit:function(){this.drg.on("start",this.onStart,this);this.drg.on("end",this.onEnd,this);this.drg.on("drag",this.onDrag,this)},onStart:function(a,b){this.initDroppables(b)},initDroppables:function(a){var b=this.drg,
d=b.drop;d=n(d)?d.call(b.$$callbackContext,b):za.getAll();var e;a=a||b.lastMoveEvent||b.startEvent;var g=0;for(e=d.length;g<e;g++)d[g]&&d[g].isEnabled()&&d[g].setCurrentDraggable(b)&&this.droppables.push({drp:d[g],coords:d[g].getCoords(),over:!1});this.checkDroppables(a.pageX,a.pageY)},onDrag:function(a,b,d){this.checkDroppables(d.x,d.y)},onEnd:function(){this.releaseDroppables()},checkDroppables:function(a,b){var d=this.drg,e=this.droppables,g;var h=0;for(g=e.length;h<g;h++){var c=e[h],f=c.coords,
k=c.over;f.x<=a&&f.x1>=a&&f.y<=b&&f.y1>=b?k||(c.drp.setDraggableOver(d),c.over=!0):k&&(c.drp.setDraggableOut(d),c.over=!1)}},releaseDroppables:function(){var a=this.drg,b=this.droppables,d;var e=0;for(d=b.length;e<d;e++){var g=b[e];g.over&&(a.trigger("before-drop",a,g.drp),a.trigger("drop",a,g.drp),g.drp.drop(a))}this.droppables=[]}});Y({$class:"draggable.plugin.Helper",drg:null,helperEl:null,$init:function(a){this.drg=a},$beforeHostInit:function(){this.drg.on("before-start",this.onBeforeStart,this);
this.drg.on("start",this.onStart,this);this.drg.on("end",this.onEnd,this);this.drg.on("end-animation",this.onEndAnimation,this)},createHelper:function(){var a=this.drg,b=a.helper;b=b.tpl?Ia(b.tpl).firstChild:b.fn.call(b.context,a);this.helperEl=a.dragEl=b},positionHelper:function(){var a=this.drg,b=a.helper,d=a.state,e=this.helperEl.style;a=b.appendTo||a.draggable.parentNode;!0!==b.manualPosition&&(e.left=d.left+"px",e.top=d.top+"px");!1!==b.appendTo&&a.appendChild(this.helperEl)},destroyHelper:function(){var a=
this.helperEl;a.parentNode.removeChild(a);this.drg.helper.destroy&&(this.helperEl=null)},onBeforeStart:function(){this.helperEl||this.createHelper()},onStart:function(){this.positionHelper()},onEnd:function(){var a=this.drg.helper.animate;this.drg.end.animate||a||this.destroyHelper();a&&va(this.helperEl,"leave",null,!1).done(this.destroyHelper,this)},onEndAnimation:function(){this.drg.end.animate&&!this.drg.helper.animate&&this.destroyHelper()}});var fb=function(){return window.document.createElement("div").style.removeProperty?
function(a,b){a.style.removeProperty(b)}:function(a,b){a.style.removeAttribute(b)}}();Y({$class:"draggable.plugin.Placeholder",drg:null,placeholderEl:null,$init:function(a){this.drg=a},$beforeHostInit:function(){this.drg.on("before-start",this.onBeforeStart,this);this.drg.on("start",this.onStart,this);this.drg.on("before-end",this.onBeforeEnd,this);this.drg.on("end",this.onEnd,this);this.drg.on("end-animation",this.onEndAnimation,this)},onBeforeStart:function(){this.placeholderEl||this.createPlaceholder()},
onStart:function(){this.positionPlaceholder()},createPlaceholder:function(){var a=this.drg,b=a.placeholder;b=b.tpl?Ia(b.tpl).firstChild:b.fn.call(b.context,a);this.placeholderEl=a.holderEl=b},positionPlaceholder:function(){var a=this.drg,b=a.placeholder,d=a.draggable,e=a.state,g=this.placeholderEl;1!=b.manualPosition&&(g.style.left=e.left+"px",g.style.top=e.top+"px");b.appendTo?b.appendTo.appendChild(g):d.parentNode.insertBefore(g,d);a.$hasPlugin("draggable.plugin.Helper")&&(d.style.display="none")},
destroyPlaceholder:function(){var a=this.drg,b=this.placeholderEl;b&&b.parentNode&&(b.parentNode.removeChild(b),this.drg.placeholder.destroy&&(this.placeholderEl=null),a.$hasPlugin("draggable.plugin.Helper")&&fb(a.draggable,"display"))},onBeforeEnd:function(){var a=this.drg;a.$hasPlugin("draggable.plugin.Helper")&&!a.end.restore&&(this.destroyPlaceholder(),a.holderEl=a.draggable)},onEnd:function(){this.drg.end.animate||this.destroyPlaceholder()},onEndAnimation:function(){this.drg.end.animate&&this.destroyPlaceholder()}});
L={};L.Draggable=Ma;L.Droppable=za;L.onReady=function(a,b){var d=!1,e=!0,g=b||window,h=function(b){if("readystatechange"!=b.type||"complete"==f.readyState)ua("load"==b.type?g:f,b.type,h),!d&&(d=!0)&&a.call(g,b.type||b)},c=function(){try{k.doScroll("left")}catch(m){setTimeout(c,50);return}h("poll")};var f=g.document;var k=f.documentElement;if("complete"==f.readyState)a.call(g,"lazy");else{if(f.createEventObject&&k.doScroll){try{e=!g.frameElement}catch(m){}e&&c()}W(f,"DOMContentLoaded",h);W(f,"readystatechange",
h);W(g,"load",h)}};"undefined"!=typeof global?global.MetaphorJs=L:window.MetaphorJs=L})();
